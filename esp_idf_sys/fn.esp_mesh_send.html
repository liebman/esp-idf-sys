<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="@brief      Send a packet over the mesh network - Send a packet to any device in the mesh network. - Send a packet to external IP network."><meta name="keywords" content="rust, rustlang, rust-lang, esp_mesh_send"><title>esp_mesh_send in esp_idf_sys - Rust</title><link rel="preload" as="font" type="font/woff2" crossorigin href="../SourceSerif4-Regular.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../FiraSans-Regular.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../FiraSans-Medium.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../SourceCodePro-Regular.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../SourceSerif4-Bold.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../SourceCodePro-Semibold.ttf.woff2"><link rel="stylesheet" type="text/css" href="../normalize.css"><link rel="stylesheet" type="text/css" href="../rustdoc.css" id="mainThemeStyle"><link rel="stylesheet" type="text/css" href="../ayu.css" disabled><link rel="stylesheet" type="text/css" href="../dark.css" disabled><link rel="stylesheet" type="text/css" href="../light.css" id="themeStyle"><script id="default-settings" ></script><script src="../storage.js"></script><script defer src="sidebar-items.js"></script><script defer src="../main.js"></script><noscript><link rel="stylesheet" href="../noscript.css"></noscript><link rel="alternate icon" type="image/png" href="../favicon-16x16.png"><link rel="alternate icon" type="image/png" href="../favicon-32x32.png"><link rel="icon" type="image/svg+xml" href="../favicon.svg"></head><body class="rustdoc fn"><!--[if lte IE 11]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><nav class="mobile-topbar"><button class="sidebar-menu-toggle">&#9776;</button><a class="sidebar-logo" href="../esp_idf_sys/index.html"><div class="logo-container"><img class="rust-logo" src="../rust-logo.svg" alt="logo"></div></a><h2 class="location"></h2></nav><nav class="sidebar"><a class="sidebar-logo" href="../esp_idf_sys/index.html"><div class="logo-container"><img class="rust-logo" src="../rust-logo.svg" alt="logo"></div></a><div class="sidebar-elems"><h2 class="location"><a href="index.html">In esp_idf_sys</a></h2></div></nav><main><div class="width-limiter"><div class="sub-container"><a class="sub-logo-container" href="../esp_idf_sys/index.html"><img class="rust-logo" src="../rust-logo.svg" alt="logo"></a><nav class="sub"><form class="search-form"><div class="search-container"><span></span><input class="search-input" name="search" autocomplete="off" spellcheck="false" placeholder="Click or press ‘S’ to search, ‘?’ for more options…" type="search"><div id="help-button" title="help" tabindex="-1"><button type="button">?</button></div><div id="settings-menu" tabindex="-1"><a href="../settings.html" title="settings"><img width="22" height="22" alt="Change settings" src="../wheel.svg"></a></div></div></form></nav></div><section id="main-content" class="content"><div class="main-heading"><h1 class="fqn"><span class="in-band">Function <a href="index.html">esp_idf_sys</a>::<wbr><a class="fn" href="#">esp_mesh_send</a><button id="copy-path" onclick="copy_path(this)" title="Copy item path to clipboard"><img src="../clipboard.svg" width="19" height="18" alt="Copy item path"></button></span></h1><span class="out-of-band"><a class="srclink" href="../src/esp_idf_sys/home/runner/work/esp-idf-sys/esp-idf-sys/target/riscv32imc-esp-espidf/debug/build/esp-idf-sys-6fc190bf7251e94d/out/bindings.rs.html#38231-38237">source</a> · <a id="toggle-all-docs" href="javascript:void(0)" title="collapse all docs">[<span class="inner">&#x2212;</span>]</a></span></div><div class="docblock item-decl"><pre class="rust fn"><code>pub unsafe extern &quot;C&quot; fn esp_mesh_send(<br>&nbsp;&nbsp;&nbsp;&nbsp;to: *const <a class="union" href="union.mesh_addr_t.html" title="union esp_idf_sys::mesh_addr_t">mesh_addr_t</a>,<br>&nbsp;&nbsp;&nbsp;&nbsp;data: *const <a class="struct" href="struct.mesh_data_t.html" title="struct esp_idf_sys::mesh_data_t">mesh_data_t</a>,<br>&nbsp;&nbsp;&nbsp;&nbsp;flag: <a class="type" href="c_types/type.c_int.html" title="type esp_idf_sys::c_types::c_int">c_int</a>,<br>&nbsp;&nbsp;&nbsp;&nbsp;opt: *const <a class="struct" href="struct.mesh_opt_t.html" title="struct esp_idf_sys::mesh_opt_t">mesh_opt_t</a>,<br>&nbsp;&nbsp;&nbsp;&nbsp;opt_count: <a class="type" href="c_types/type.c_int.html" title="type esp_idf_sys::c_types::c_int">c_int</a><br>) -&gt; <a class="type" href="type.esp_err_t.html" title="type esp_idf_sys::esp_err_t">esp_err_t</a></code></pre></div><details class="rustdoc-toggle top-doc" open><summary class="hideme"><span>Expand description</span></summary><div class="docblock"><p>@brief      Send a packet over the mesh network
- Send a packet to any device in the mesh network.
- Send a packet to external IP network.</p>
<p>@attention  This API is not reentrant.</p>
<p>@param[in]  to  the address of the final destination of the packet
- If the packet is to the root, set this parameter to NULL.
- If the packet is to an external IP network, set this parameter to the IPv4:PORT combination.
This packet will be delivered to the root firstly, then the root will forward this packet to the final IP server address.
@param[in]  data  pointer to a sending mesh packet
- Field size should not exceed MESH_MPS. Note that the size of one mesh packet should not exceed MESH_MTU.
- Field proto should be set to data protocol in use (default is MESH_PROTO_BIN for binary).
- Field tos should be set to transmission tos (type of service) in use (default is MESH_TOS_P2P for point-to-point reliable).
@param[in]  flag  bitmap for data sent
-  Speed up the route search
- If the packet is to the root and “to” parameter is NULL, set this parameter to 0.
- If the packet is to an internal device, MESH_DATA_P2P should be set.
- If the packet is to the root (“to” parameter isn’t NULL) or to external IP network, MESH_DATA_TODS should be set.
- If the packet is from the root to an internal device, MESH_DATA_FROMDS should be set.
- Specify whether this API is block or non-block, block by default
- If needs non-blocking, MESH_DATA_NONBLOCK should be set. Otherwise, may use esp_mesh_send_block_time() to specify a blocking time.
- In the situation of the root change, MESH_DATA_DROP identifies this packet can be dropped by the new root
for upstream data to external IP network, we try our best to avoid data loss caused by the root change, but
there is a risk that the new root is running out of memory because most of memory is occupied by the pending data which
isn’t read out in time by esp_mesh_recv_toDS().</p>

<div class="example-wrap"><pre class="rust rust-example-rendered"><code>          <span class="ident">Generally</span>, <span class="ident">we</span> <span class="ident">suggest</span> <span class="ident">esp_mesh_recv_toDS</span>() <span class="ident">is</span> <span class="ident">called</span> <span class="ident">after</span> <span class="ident">a</span> <span class="ident">connection</span> <span class="ident">with</span> <span class="ident">IP</span> <span class="ident">network</span> <span class="ident">is</span> <span class="ident">created</span>. <span class="ident">Thus</span> <span class="ident">data</span> <span class="ident">outgoing</span>
          <span class="ident">to</span> <span class="ident">external</span> <span class="ident">IP</span> <span class="ident">network</span> <span class="ident">via</span> <span class="ident">socket</span> <span class="ident">is</span> <span class="ident">just</span> <span class="ident">from</span> <span class="ident">reading</span> <span class="ident">esp_mesh_recv_toDS</span>() <span class="ident">which</span> <span class="ident">avoids</span> <span class="ident">unnecessary</span> <span class="ident">memory</span> <span class="ident">copy</span>.</code></pre></div>
<p>@param[in]  opt  options
- In case of sending a packet to a certain group, MESH_OPT_SEND_GROUP is a good choice.
In this option, the value field should be set to the target receiver addresses in this group.
- Root sends a packet to an internal device, this packet is from external IP network in case the receiver device responds
this packet, MESH_OPT_RECV_DS_ADDR is required to attach the target DS address.
@param[in]  opt_count  option count
- Currently, this API only takes one option, so opt_count is only supported to be 1.</p>
<p>@return</p>
<ul>
<li>ESP_OK</li>
<li>ESP_FAIL</li>
<li>ESP_ERR_MESH_ARGUMENT</li>
<li>ESP_ERR_MESH_NOT_START</li>
<li>ESP_ERR_MESH_DISCONNECTED</li>
<li>ESP_ERR_MESH_OPT_UNKNOWN</li>
<li>ESP_ERR_MESH_EXCEED_MTU</li>
<li>ESP_ERR_MESH_NO_MEMORY</li>
<li>ESP_ERR_MESH_TIMEOUT</li>
<li>ESP_ERR_MESH_QUEUE_FULL</li>
<li>ESP_ERR_MESH_NO_ROUTE_FOUND</li>
<li>ESP_ERR_MESH_DISCARD</li>
</ul>
</div></details></section></div></main><div id="rustdoc-vars" data-root-path="../" data-current-crate="esp_idf_sys" data-themes="ayu,dark,light" data-resource-suffix="" data-rustdoc-version="1.64.0-nightly (f9cba6374 2022-07-31)" ></div></body></html>